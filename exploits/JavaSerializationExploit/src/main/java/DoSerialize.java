import java.io.*;
import java.util.Base64;
import java.net.*;

import java.io.ObjectInputStream;
import java.io.Serializable;
public class DoSerialize {

  public class AuthToken implements Serializable {
    private static final long serialVersionUID = 1L;
  
    // yes there are only 2 roles so
    // having them in this class should be fine
    public int ADMIN = 0;
    public int USER = 1;
  
    private int role;
  
    public AuthToken(int role) {
      this.role = role;
    }
  
    public boolean isAdmin() {
      return this.role == ADMIN;
    }
  
    public int getRole() {
      if(this.role == ADMIN) {
        return ADMIN;
      } else {
        return USER;
      }
    }
  
    public void setRole(int role) {
      this.role = role;
    }
    public void readObject(ObjectInputStream stream) throws IOException, ClassNotFoundException {
      System.out.println("leeeeeeeeee");
    }
  }

  public static void main(String[] main) throws Exception{
    DoSerialize dos = new DoSerialize();
    DoSerialize.AuthToken authToken = dos.new AuthToken(0);
    ByteArrayOutputStream bos = new ByteArrayOutputStream();
    ObjectOutputStream out = new ObjectOutputStream(bos);
    out.writeObject(authToken);
    String finalToken = new String(Base64.getEncoder().encode(bos.toByteArray()));
    out.writeObject(authToken);
    out.close();

    System.out.println(finalToken);
  }
}

